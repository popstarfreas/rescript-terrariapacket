// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

let PacketType$TerrariaPacket = require("../PacketType.js");
let ManagedPacketWriter$PacketFactory = require("@popstarfreas/packetfactory/src/ManagedPacketWriter.js");
let ErrorAwarePacketReader$TerrariaPacket = require("../ErrorAwarePacketReader.js");
let Packetreader = require("@popstarfreas/packetfactory/packetreader").default;
let Packetwriter = require("@popstarfreas/packetfactory/packetwriter").default;

function parse(payload) {
  let reader = new Packetreader(payload);
  let e = ErrorAwarePacketReader$TerrariaPacket.readInt16(reader, "playerId");
  if (e.TAG !== "Ok") {
    return e;
  }
  let e$1 = ErrorAwarePacketReader$TerrariaPacket.readInt16(reader, "spawnType");
  if (e$1.TAG !== "Ok") {
    return e$1;
  }
  let rawSpawnType = e$1._0;
  let spawnType;
  let exit = 0;
  switch (rawSpawnType) {
    case -18 :
      spawnType = "PeddlersSatchel";
      break;
    case -17 :
      spawnType = "CombatBookVolumeTwo";
      break;
    case -16 :
      spawnType = "MechQueen";
      break;
    case -15 :
      spawnType = "BoughtSlime";
      break;
    case -14 :
      spawnType = "BoughtBunny";
      break;
    case -13 :
      spawnType = "BoughtDog";
      break;
    case -12 :
      spawnType = "BoughtCat";
      break;
    case -11 :
      spawnType = "CombatBookUsed";
      break;
    case -10 :
      spawnType = "BloodMoon";
      break;
    case -8 :
      spawnType = "ImpendingDoom";
      break;
    case -7 :
      spawnType = "MartianMoon";
      break;
    case -6 :
      spawnType = "Eclipse";
      break;
    case -5 :
      spawnType = "SnowMoon";
      break;
    case -4 :
      spawnType = "PumpkinMoon";
      break;
    case -3 :
      spawnType = "PirateInvasion";
      break;
    case -2 :
      spawnType = "FrostInvasion";
      break;
    case -1 :
      spawnType = "GoblinInvasion";
      break;
    default:
      exit = 1;
  }
  if (exit === 1) {
    spawnType = rawSpawnType < 0 ? ({
        TAG: "Invasion",
        _0: -rawSpawnType | 0
      }) : ({
        TAG: "Npc",
        _0: rawSpawnType
      });
  }
  return {
    TAG: "Ok",
    _0: {
      playerId: e._0,
      spawnType: spawnType
    }
  };
}

let Decode = {
  readInt16: ErrorAwarePacketReader$TerrariaPacket.readInt16,
  parse: parse
};

function packInt16(prim0, prim1) {
  return prim0.packInt16(prim1);
}

function data(prim) {
  return prim.data;
}

function packSpawnType(writer, spawnType) {
  if (typeof spawnType === "object") {
    if (spawnType.TAG === "Invasion") {
      return writer.packInt16(-spawnType._0 | 0);
    } else {
      return writer.packInt16(spawnType._0);
    }
  }
  switch (spawnType) {
    case "GoblinInvasion" :
      return writer.packInt16(-1);
    case "FrostInvasion" :
      return writer.packInt16(-2);
    case "PirateInvasion" :
      return writer.packInt16(-3);
    case "PumpkinMoon" :
      return writer.packInt16(-4);
    case "SnowMoon" :
      return writer.packInt16(-5);
    case "Eclipse" :
      return writer.packInt16(-6);
    case "MartianMoon" :
      return writer.packInt16(-7);
    case "ImpendingDoom" :
      return writer.packInt16(-8);
    case "BloodMoon" :
      return writer.packInt16(-10);
    case "CombatBookUsed" :
      return writer.packInt16(-11);
    case "BoughtCat" :
      return writer.packInt16(-12);
    case "BoughtDog" :
      return writer.packInt16(-13);
    case "BoughtBunny" :
      return writer.packInt16(-14);
    case "BoughtSlime" :
      return writer.packInt16(-15);
    case "MechQueen" :
      return writer.packInt16(-16);
    case "CombatBookVolumeTwo" :
      return writer.packInt16(-17);
    case "PeddlersSatchel" :
      return writer.packInt16(-18);
  }
}

function toBuffer(self) {
  return packSpawnType(ManagedPacketWriter$PacketFactory.setType(new Packetwriter(), PacketType$TerrariaPacket.toInt("BossOrInvasionSpawn")).packInt16(self.playerId), self.spawnType).data;
}

let Encode = {
  Writer: undefined,
  packInt16: packInt16,
  setType: ManagedPacketWriter$PacketFactory.setType,
  data: data,
  packSpawnType: packSpawnType,
  toBuffer: toBuffer
};

exports.Decode = Decode;
exports.Encode = Encode;
exports.parse = parse;
exports.toBuffer = toBuffer;
/* @popstarfreas/packetfactory/packetreader Not a pure module */
