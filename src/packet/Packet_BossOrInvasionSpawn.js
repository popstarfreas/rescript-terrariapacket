// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

let PacketType$TerrariaPacket = require("../PacketType.js");
let ErrorAwarePacketReader$TerrariaPacket = require("../ErrorAwarePacketReader.js");
let ErrorAwarePacketWriter$TerrariaPacket = require("../ErrorAwarePacketWriter.js");
let Packetreader = require("@popstarfreas/packetfactory/packetreader").default;

function parse(payload) {
  let reader = new Packetreader(payload);
  let e = ErrorAwarePacketReader$TerrariaPacket.readInt16(reader, "playerId");
  if (e.TAG !== "Ok") {
    return e;
  }
  let e$1 = ErrorAwarePacketReader$TerrariaPacket.readInt16(reader, "spawnType");
  if (e$1.TAG !== "Ok") {
    return e$1;
  }
  let rawSpawnType = e$1._0;
  let spawnType;
  let exit = 0;
  switch (rawSpawnType) {
    case -18 :
      spawnType = "PeddlersSatchel";
      break;
    case -17 :
      spawnType = "CombatBookVolumeTwo";
      break;
    case -16 :
      spawnType = "MechQueen";
      break;
    case -15 :
      spawnType = "BoughtSlime";
      break;
    case -14 :
      spawnType = "BoughtBunny";
      break;
    case -13 :
      spawnType = "BoughtDog";
      break;
    case -12 :
      spawnType = "BoughtCat";
      break;
    case -11 :
      spawnType = "CombatBookUsed";
      break;
    case -10 :
      spawnType = "BloodMoon";
      break;
    case -8 :
      spawnType = "ImpendingDoom";
      break;
    case -7 :
      spawnType = "MartianMoon";
      break;
    case -6 :
      spawnType = "Eclipse";
      break;
    case -5 :
      spawnType = "SnowMoon";
      break;
    case -4 :
      spawnType = "PumpkinMoon";
      break;
    case -3 :
      spawnType = "PirateInvasion";
      break;
    case -2 :
      spawnType = "FrostInvasion";
      break;
    case -1 :
      spawnType = "GoblinInvasion";
      break;
    default:
      exit = 1;
  }
  if (exit === 1) {
    spawnType = rawSpawnType < 0 ? ({
        TAG: "Invasion",
        _0: -rawSpawnType | 0
      }) : ({
        TAG: "Npc",
        _0: rawSpawnType
      });
  }
  return {
    TAG: "Ok",
    _0: {
      playerId: e._0,
      spawnType: spawnType
    }
  };
}

let Decode = {
  readInt16: ErrorAwarePacketReader$TerrariaPacket.readInt16,
  parse: parse
};

function packSpawnType(writer, spawnType) {
  if (typeof spawnType === "object") {
    if (spawnType.TAG === "Invasion") {
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, -spawnType._0 | 0, "spawnType");
    } else {
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, spawnType._0, "spawnType");
    }
  }
  switch (spawnType) {
    case "GoblinInvasion" :
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, -1, "spawnType");
    case "FrostInvasion" :
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, -2, "spawnType");
    case "PirateInvasion" :
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, -3, "spawnType");
    case "PumpkinMoon" :
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, -4, "spawnType");
    case "SnowMoon" :
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, -5, "spawnType");
    case "Eclipse" :
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, -6, "spawnType");
    case "MartianMoon" :
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, -7, "spawnType");
    case "ImpendingDoom" :
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, -8, "spawnType");
    case "BloodMoon" :
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, -10, "spawnType");
    case "CombatBookUsed" :
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, -11, "spawnType");
    case "BoughtCat" :
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, -12, "spawnType");
    case "BoughtDog" :
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, -13, "spawnType");
    case "BoughtBunny" :
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, -14, "spawnType");
    case "BoughtSlime" :
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, -15, "spawnType");
    case "MechQueen" :
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, -16, "spawnType");
    case "CombatBookVolumeTwo" :
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, -17, "spawnType");
    case "PeddlersSatchel" :
      return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, -18, "spawnType");
  }
}

function toBuffer(self) {
  return ErrorAwarePacketWriter$TerrariaPacket.data(packSpawnType(ErrorAwarePacketWriter$TerrariaPacket.packInt16(ErrorAwarePacketWriter$TerrariaPacket.setType(ErrorAwarePacketWriter$TerrariaPacket.make(), PacketType$TerrariaPacket.toInt("BossOrInvasionSpawn")), self.playerId, "playerId"), self.spawnType));
}

let Encode = {
  Writer: undefined,
  packInt16: ErrorAwarePacketWriter$TerrariaPacket.packInt16,
  setType: ErrorAwarePacketWriter$TerrariaPacket.setType,
  data: ErrorAwarePacketWriter$TerrariaPacket.data,
  packSpawnType: packSpawnType,
  toBuffer: toBuffer
};

exports.Decode = Decode;
exports.Encode = Encode;
exports.parse = parse;
exports.toBuffer = toBuffer;
/* ErrorAwarePacketWriter-TerrariaPacket Not a pure module */
