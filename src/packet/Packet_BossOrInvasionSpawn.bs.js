// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

var PacketType$TerrariaPacket = require("../PacketType.bs.js");
var ManagedPacketWriter$PacketFactory = require("@popstarfreas/packetfactory/src/ManagedPacketWriter.bs.js");
var Packetreader = require("@popstarfreas/packetfactory/packetreader").default;
var Packetwriter = require("@popstarfreas/packetfactory/packetwriter").default;

function readInt16(prim) {
  return prim.readInt16();
}

function parse(payload) {
  var reader = new Packetreader(payload);
  var playerId = reader.readInt16();
  var invasionType = reader.readInt16();
  var spawnType;
  var exit = 0;
  switch (invasionType) {
    case -18 :
        spawnType = "PeddlersSatchel";
        break;
    case -17 :
        spawnType = "CombatBookVolumeTwo";
        break;
    case -16 :
        spawnType = "MechQueen";
        break;
    case -15 :
        spawnType = "BoughtSlime";
        break;
    case -14 :
        spawnType = "BoughtBunny";
        break;
    case -13 :
        spawnType = "BoughtDog";
        break;
    case -12 :
        spawnType = "BoughtCat";
        break;
    case -11 :
        spawnType = "CombatBookUsed";
        break;
    case -10 :
        spawnType = "BloodMoon";
        break;
    case -9 :
        exit = 1;
        break;
    case -8 :
        spawnType = "ImpendingDoom";
        break;
    case -7 :
        spawnType = "MartianMoon";
        break;
    case -6 :
        spawnType = "Eclipse";
        break;
    case -5 :
        spawnType = "SnowMoon";
        break;
    case -4 :
        spawnType = "PumpkinMoon";
        break;
    case -3 :
        spawnType = "PirateInvasion";
        break;
    case -2 :
        spawnType = "FrostInvasion";
        break;
    case -1 :
        spawnType = "GoblinInvasion";
        break;
    default:
      exit = 1;
  }
  if (exit === 1) {
    spawnType = invasionType < 0 ? ({
          TAG: "Invasion",
          _0: -invasionType | 0
        }) : ({
          TAG: "Npc",
          _0: invasionType
        });
  }
  return {
          playerId: playerId,
          spawnType: spawnType
        };
}

var Decode = {
  readInt16: readInt16,
  parse: parse
};

function packInt16(prim0, prim1) {
  return prim0.packInt16(prim1);
}

function data(prim) {
  return prim.data;
}

function packSpawnType(writer, spawnType) {
  if (typeof spawnType === "object") {
    if (spawnType.TAG === "Invasion") {
      return writer.packInt16(-spawnType._0 | 0);
    } else {
      return writer.packInt16(spawnType._0);
    }
  }
  switch (spawnType) {
    case "GoblinInvasion" :
        return writer.packInt16(-1);
    case "FrostInvasion" :
        return writer.packInt16(-2);
    case "PirateInvasion" :
        return writer.packInt16(-3);
    case "PumpkinMoon" :
        return writer.packInt16(-4);
    case "SnowMoon" :
        return writer.packInt16(-5);
    case "Eclipse" :
        return writer.packInt16(-6);
    case "MartianMoon" :
        return writer.packInt16(-7);
    case "ImpendingDoom" :
        return writer.packInt16(-8);
    case "BloodMoon" :
        return writer.packInt16(-10);
    case "CombatBookUsed" :
        return writer.packInt16(-11);
    case "BoughtCat" :
        return writer.packInt16(-12);
    case "BoughtDog" :
        return writer.packInt16(-13);
    case "BoughtBunny" :
        return writer.packInt16(-14);
    case "BoughtSlime" :
        return writer.packInt16(-15);
    case "MechQueen" :
        return writer.packInt16(-16);
    case "CombatBookVolumeTwo" :
        return writer.packInt16(-17);
    case "PeddlersSatchel" :
        return writer.packInt16(-18);
    
  }
}

function toBuffer(self) {
  return packSpawnType(ManagedPacketWriter$PacketFactory.setType(new Packetwriter(), PacketType$TerrariaPacket.toInt("BossOrInvasionSpawn")).packInt16(self.playerId), self.spawnType).data;
}

var Encode = {
  Writer: undefined,
  packInt16: packInt16,
  setType: ManagedPacketWriter$PacketFactory.setType,
  data: data,
  packSpawnType: packSpawnType,
  toBuffer: toBuffer
};

exports.Decode = Decode;
exports.Encode = Encode;
exports.parse = parse;
exports.toBuffer = toBuffer;
/* @popstarfreas/packetfactory/packetreader Not a pure module */
