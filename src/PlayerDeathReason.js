// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

let Belt_Option = require("@rescript/runtime/lib/js/Belt_Option.js");
let BitFlags$TerrariaPacket = require("./BitFlags.js");
let ErrorAwarePacketReader$TerrariaPacket = require("./ErrorAwarePacketReader.js");
let ErrorAwarePacketWriter$TerrariaPacket = require("./ErrorAwarePacketWriter.js");

function otherFromByte(byte) {
  switch (byte) {
    case 0 :
      return "FallDamage";
    case 1 :
      return "Drowning";
    case 2 :
      return "Lava";
    case 3 :
      return "FallDamage2";
    case 4 :
      return "DemonAltar";
    case 5 :
      return "CompanionCube";
    case 6 :
      return "Suffocation";
    case 7 :
      return "Burning";
    case 8 :
      return "Poison";
    case 9 :
      return "Electrified";
    case 10 :
      return "WallOfFleshEscape";
    case 11 :
      return "WallOfFleshLicked";
    case 12 :
      return "ChaosState";
    case 13 :
      return "ChaosState2Male";
    case 14 :
      return "ChaosState3Female";
    default:
      return;
  }
}

function otherToByte(other) {
  switch (other) {
    case "FallDamage" :
      return 0;
    case "Drowning" :
      return 1;
    case "Lava" :
      return 2;
    case "FallDamage2" :
      return 3;
    case "DemonAltar" :
      return 4;
    case "CompanionCube" :
      return 5;
    case "Suffocation" :
      return 6;
    case "Burning" :
      return 7;
    case "Poison" :
      return 8;
    case "Electrified" :
      return 9;
    case "WallOfFleshEscape" :
      return 10;
    case "WallOfFleshLicked" :
      return 11;
    case "ChaosState" :
      return 12;
    case "ChaosState2Male" :
      return 13;
    case "ChaosState3Female" :
      return 14;
  }
}

function readDeathReason(reader) {
  let e = ErrorAwarePacketReader$TerrariaPacket.readByte(reader, "reasonType");
  if (e.TAG !== "Ok") {
    return e;
  }
  let reasonType = BitFlags$TerrariaPacket.fromByte(e._0);
  let e$1;
  if (BitFlags$TerrariaPacket.flag1(reasonType)) {
    let e$2 = ErrorAwarePacketReader$TerrariaPacket.readInt16(reader, "killerPlayerId");
    e$1 = e$2.TAG === "Ok" ? ({
        TAG: "Ok",
        _0: e$2._0
      }) : e$2;
  } else {
    e$1 = {
      TAG: "Ok",
      _0: undefined
    };
  }
  if (e$1.TAG !== "Ok") {
    return e$1;
  }
  let e$3;
  if (BitFlags$TerrariaPacket.flag2(reasonType)) {
    let e$4 = ErrorAwarePacketReader$TerrariaPacket.readInt16(reader, "killerNpcId");
    e$3 = e$4.TAG === "Ok" ? ({
        TAG: "Ok",
        _0: e$4._0
      }) : e$4;
  } else {
    e$3 = {
      TAG: "Ok",
      _0: undefined
    };
  }
  if (e$3.TAG !== "Ok") {
    return e$3;
  }
  let e$5;
  if (BitFlags$TerrariaPacket.flag3(reasonType)) {
    let e$6 = ErrorAwarePacketReader$TerrariaPacket.readInt16(reader, "killerProjectileId");
    e$5 = e$6.TAG === "Ok" ? ({
        TAG: "Ok",
        _0: e$6._0
      }) : e$6;
  } else {
    e$5 = {
      TAG: "Ok",
      _0: undefined
    };
  }
  if (e$5.TAG !== "Ok") {
    return e$5;
  }
  let e$7;
  if (BitFlags$TerrariaPacket.flag4(reasonType)) {
    let e$8 = ErrorAwarePacketReader$TerrariaPacket.readByte(reader, "typeOfDeathOther");
    e$7 = e$8.TAG === "Ok" ? ({
        TAG: "Ok",
        _0: otherFromByte(e$8._0)
      }) : e$8;
  } else {
    e$7 = {
      TAG: "Ok",
      _0: undefined
    };
  }
  if (e$7.TAG !== "Ok") {
    return e$7;
  }
  let e$9;
  if (BitFlags$TerrariaPacket.flag5(reasonType)) {
    let e$10 = ErrorAwarePacketReader$TerrariaPacket.readInt16(reader, "projectileType");
    e$9 = e$10.TAG === "Ok" ? ({
        TAG: "Ok",
        _0: e$10._0
      }) : e$10;
  } else {
    e$9 = {
      TAG: "Ok",
      _0: undefined
    };
  }
  if (e$9.TAG !== "Ok") {
    return e$9;
  }
  let e$11;
  if (BitFlags$TerrariaPacket.flag6(reasonType)) {
    let e$12 = ErrorAwarePacketReader$TerrariaPacket.readInt16(reader, "itemType");
    e$11 = e$12.TAG === "Ok" ? ({
        TAG: "Ok",
        _0: e$12._0
      }) : e$12;
  } else {
    e$11 = {
      TAG: "Ok",
      _0: undefined
    };
  }
  if (e$11.TAG !== "Ok") {
    return e$11;
  }
  let e$13;
  if (BitFlags$TerrariaPacket.flag7(reasonType)) {
    let e$14 = ErrorAwarePacketReader$TerrariaPacket.readByte(reader, "itemPrefix");
    e$13 = e$14.TAG === "Ok" ? ({
        TAG: "Ok",
        _0: e$14._0
      }) : e$14;
  } else {
    e$13 = {
      TAG: "Ok",
      _0: undefined
    };
  }
  if (e$13.TAG !== "Ok") {
    return e$13;
  }
  let e$15;
  if (BitFlags$TerrariaPacket.flag8(reasonType)) {
    let e$16 = ErrorAwarePacketReader$TerrariaPacket.readString(reader, "deathReason");
    e$15 = e$16.TAG === "Ok" ? ({
        TAG: "Ok",
        _0: e$16._0
      }) : e$16;
  } else {
    e$15 = {
      TAG: "Ok",
      _0: undefined
    };
  }
  if (e$15.TAG === "Ok") {
    return {
      TAG: "Ok",
      _0: {
        killerPlayerId: e$1._0,
        killerNpcId: e$3._0,
        killerProjectileId: e$5._0,
        typeOfDeathOther: e$7._0,
        projectileType: e$9._0,
        itemType: e$11._0,
        itemPrefix: e$13._0,
        deathReason: e$15._0
      }
    };
  } else {
    return e$15;
  }
}

function packFlags(writer, self) {
  let flags = BitFlags$TerrariaPacket.fromFlags(Belt_Option.isSome(self.killerPlayerId), Belt_Option.isSome(self.killerNpcId), Belt_Option.isSome(self.killerProjectileId), Belt_Option.isSome(self.typeOfDeathOther), Belt_Option.isSome(self.projectileType), Belt_Option.isSome(self.itemType), Belt_Option.isSome(self.itemPrefix), Belt_Option.isSome(self.deathReason));
  return ErrorAwarePacketWriter$TerrariaPacket.packByte(writer, BitFlags$TerrariaPacket.toByte(flags), "reasonType");
}

function packKillerPlayerId(writer, self) {
  let killerPlayerId = self.killerPlayerId;
  if (killerPlayerId !== undefined) {
    return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, killerPlayerId, "killerPlayerId");
  } else {
    return writer;
  }
}

function packKillerNpcId(writer, self) {
  let killerNpcId = self.killerNpcId;
  if (killerNpcId !== undefined) {
    return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, killerNpcId, "killerNpcId");
  } else {
    return writer;
  }
}

function packKillerProjectileId(writer, self) {
  let killerProjectileId = self.killerProjectileId;
  if (killerProjectileId !== undefined) {
    return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, killerProjectileId, "killerProjectileId");
  } else {
    return writer;
  }
}

function packTypeOfDeathOther(writer, self) {
  let typeOfDeathOther = self.typeOfDeathOther;
  if (typeOfDeathOther !== undefined) {
    return ErrorAwarePacketWriter$TerrariaPacket.packByte(writer, otherToByte(typeOfDeathOther), "typeOfDeathOther");
  } else {
    return writer;
  }
}

function packProjectileType(writer, self) {
  let projectileType = self.projectileType;
  if (projectileType !== undefined) {
    return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, projectileType, "projectileType");
  } else {
    return writer;
  }
}

function packItemType(writer, self) {
  let itemType = self.itemType;
  if (itemType !== undefined) {
    return ErrorAwarePacketWriter$TerrariaPacket.packInt16(writer, itemType, "itemType");
  } else {
    return writer;
  }
}

function packItemPrefix(writer, self) {
  let itemPrefix = self.itemPrefix;
  if (itemPrefix !== undefined) {
    return ErrorAwarePacketWriter$TerrariaPacket.packByte(writer, itemPrefix, "itemPrefix");
  } else {
    return writer;
  }
}

function pack(writer, self) {
  let writer$1 = packItemPrefix(packItemType(packProjectileType(packTypeOfDeathOther(packKillerProjectileId(packKillerNpcId(packKillerPlayerId(packFlags(writer, self), self), self), self), self), self), self), self);
  let deathReason = self.deathReason;
  if (deathReason !== undefined) {
    return ErrorAwarePacketWriter$TerrariaPacket.packString(writer$1, deathReason, "deathReason");
  } else {
    return writer$1;
  }
}

let packDeathReason = pack;

exports.readDeathReason = readDeathReason;
exports.packDeathReason = packDeathReason;
/* ErrorAwarePacketWriter-TerrariaPacket Not a pure module */
