module ConnectRequest = Packet_ConnectRequest
module Disconnect = Packet_Disconnect
module PlayerSlotSet = Packet_PlayerSlotSet
module PlayerInfo = Packet_PlayerInfo
module PlayerInventorySlot = Packet_PlayerInventorySlot
module WorldDataRequest = Packet_WorldDataRequest
module WorldInfo = Packet_WorldInfo
module InitialTileSectionsRequest = Packet_InitialTileSectionsRequest
module Status = Packet_Status
module TileSectionSend = Packet_TileSectionSend
module TileSectionFrame = Packet_TileSectionFrame
module PlayerSpawn = Packet_PlayerSpawn
module PlayerUpdate = Packet_PlayerUpdate
module PlayerActive = Packet_PlayerActive
module PlayerHealth = Packet_PlayerHealth
module TileModify = Packet_TileModify
module TimeSet = Packet_TimeSet
module DoorUse = Packet_DoorUse
module TileSquareSend = Packet_TileSquareSend
module ItemDropUpdate = Packet_ItemDropUpdate
module ItemOwner = Packet_ItemOwner
module NpcUpdate = Packet_NpcUpdate
module NpcItemStrike = Packet_NpcItemStrike
module ProjectileSync = Packet_ProjectileSync
module NpcStrike = Packet_NpcStrike
module ProjectileDestroy = Packet_ProjectileDestroy
module PvpToggle = Packet_PvpToggle
module ChestOpen = Packet_ChestOpen
module ChestItem = Packet_ChestItem
module ActiveContainerSync = Packet_ActiveContainerSync
module ChestPlace = Packet_ChestPlace
module HealEffect = Packet_HealEffect
module Zones = Packet_Zones
module PasswordRequired = Packet_PasswordRequired
module PasswordSend = Packet_PasswordSend
module ItemOwnerRemove = Packet_ItemOwnerRemove
module NpcTalk = Packet_NpcTalk
module PlayerAnimation = Packet_PlayerAnimation
module PlayerMana = Packet_PlayerMana
module ManaEffect = Packet_ManaEffect
module PlayerTeam = Packet_PlayerTeam
module SignRead = Packet_SignRead
module SignNew = Packet_SignNew
module LiquidSet = Packet_LiquidSet
module PlayerSpawnSelf = Packet_PlayerSpawnSelf
module PlayerBuffsSet = Packet_PlayerBuffsSet
module NpcSpecialEffect = Packet_NpcSpecialEffect
module ChestOrTempleUnlock = Packet_ChestOrTempleUnlock
module NpcBuffAdd = Packet_NpcBuffAdd
module NpcBuffUpdate = Packet_NpcBuffUpdate
module PlayerBuffAdd = Packet_PlayerBuffAdd
module NpcNameUpdate = Packet_NpcNameUpdate
module GoodEvilUpdate = Packet_GoodEvilUpdate
module HarpPlay = Packet_HarpPlay
module SwitchHit = Packet_SwitchHit
module NpcHomeUpdate = Packet_NpcHomeUpdate
module BossOrInvasionSpawn = Packet_BossOrInvasionSpawn
module PlayerDodge = Packet_PlayerDodge
module TilePaint = Packet_TilePaint
module WallPaint = Packet_WallPaint
module Teleport = Packet_Teleport
module PlayerHealOther = Packet_PlayerHealOther
module DimensionsUpdate = Packet_DimensionsUpdate
module ClientUuid = Packet_ClientUuid
module ChestName = Packet_ChestName
module NpcCatch = Packet_NpcCatch
module NpcRelease = Packet_NpcRelease
module TravellingMerchantInventory = Packet_TravellingMerchantInventory
module TeleportationPotion = Packet_TeleportationPotion
module AnglerQuest = Packet_AnglerQuest
module AnglerQuestComplete = Packet_AnglerQuestComplete
module AnglerQuestsCompletedAmount = Packet_AnglerQuestsCompletedAmount
module TemporaryAnimationCreate = Packet_TemporaryAnimationCreate
module InvasionProgressReport = Packet_InvasionProgressReport
module ObjectPlace = Packet_ObjectPlace
module PlayerChestIndexSync = Packet_PlayerChestIndexSync
module CombatNumberCreate = Packet_CombatNumberCreate
module NetModuleLoad = Packet_NetModuleLoad
module NpcKillCount = Packet_NpcKillCount
module PlayerStealth = Packet_PlayerStealth
module ItemForceIntoNearestChest = Packet_ItemForceIntoNearestChest
module TileEntityUpdate = Packet_TileEntityUpdate
module TileEntityPlace = Packet_TileEntityPlace
module ItemDropModify = Packet_ItemDropModify
module ItemFramePlace = Packet_ItemFramePlace
module ItemDropInstancedUpdate = Packet_ItemDropInstancedUpdate
module EmoteBubble = Packet_EmoteBubble
module ExtraValueSync = Packet_ExtraValueSync
module SocialHandshake = Packet_SocialHandshake
module Unused = Packet_Unused
module PortalKill = Packet_PortalKill
module PlayerTeleportPortal = Packet_PlayerTeleportPortal
module NpcKilledNotification = Packet_NpcKilledNotification
module EventNotification = Packet_EventNotification
module MinionTargetUpdate = Packet_MinionTargetUpdate
module NpcTeleportPortal = Packet_NpcTeleportPortal
module ShieldStrengthsUpdate = Packet_ShieldStrengthsUpdate
module NebulaLevelUp = Packet_NebulaLevelUp
module MoonLordCountdown = Packet_MoonLordCountdown
module NpcShopItem = Packet_NpcShopItem
module GemLockToggle = Packet_GemLockToggle
module SmokePoof = Packet_SmokePoof
module ChatMessageSmart = Packet_ChatMessageSmart
module WiredCannonShot = Packet_WiredCannonShot
module MassWireOperation = Packet_MassWireOperation
module MassWireOperationPay = Packet_MassWireOperationPay
module PartyToggle = Packet_PartyToggle
module TreeGrowFx = Packet_TreeGrowFx
module CrystalInvasionStart = Packet_CrystalInvasionStart
module CrystalInvasionWipeAll = Packet_CrystalInvasionWipeAll
module MinionAttackTargetUpdate = Packet_MinionAttackTargetUpdate
module CrystalInvasionSendWaitTime = Packet_CrystalInvasionSendWaitTime
module PlayerDamage = Packet_PlayerDamage
module PlayerDeath = Packet_PlayerDeath
module CombatTextCreate = Packet_CombatTextCreate
module Emoji = Packet_Emoji
module TileEntityDisplayDollItemSync = Packet_TileEntityDisplayDollItemSync
module TileEntityInteractionRequest = Packet_TileEntityInteractionRequest
module WeaponsRackTryPlacing = Packet_WeaponsRackTryPlacing
module TileEntityHatRackItemSync = Packet_TileEntityHatRackItemSync
module TilePickingSync = Packet_TilePickingSync
module RevengeMarkerSync = Packet_RevengeMarkerSync
module RevengeMarkerRemove = Packet_RevengeMarkerRemove
module GolfBallLandInCup = Packet_GolfBallLandInCup
module ClientFinishConnectingToServer = Packet_ClientFinishConnectingToServer
module NpcFishOut = Packet_NpcFishOut
module NpcTamper = Packet_NpcTamper
module LegacySoundPlay = Packet_LegacySoundPlay
module FoodPlatterTryPlacing = Packet_FoodPlatterTryPlacing
module PlayerLuckFactorsUpdate = Packet_PlayerLuckFactorsUpdate
module PlayerDead = Packet_PlayerDead
module CavernMonsterTypeSync = Packet_CavernMonsterTypeSync
module NpcBuffRemovalRequest = Packet_NpcBuffRemovalRequest
module ClientSyncedInventory = Packet_ClientSyncedInventory
module CountsAsHostForGameplaySet = Packet_CountsAsHostForGameplaySet
module CreditsOrSlimeTransform = Packet_CreditsOrSlimeTransform
module LucyAxeMessage = Packet_LucyAxeMessage
module PiggyBankVoidLensUpdate = Packet_PiggyBankVoidLensUpdate
module DungeonDefendersEventAttemptSkipWait = Packet_DungeonDefendersEventAttemptSkipWait
module HaveDryadDoStardewAnimation = Packet_HaveDryadDoStardewAnimation
module ItemDropShimmeredUpdate = Packet_ItemDropShimmeredUpdate
module ShimmerEffectOrCoinLuck = Packet_ShimmerEffectOrCoinLuck
module LoadoutSwitch = Packet_LoadoutSwitch
module ItemDropProtectedUpdate = Packet_ItemDropProtectedUpdate

type t =
  | ConnectRequest(ConnectRequest.t)
  | Disconnect(Disconnect.t)
  | PlayerSlotSet(PlayerSlotSet.t)
  | PlayerInfo(PlayerInfo.t)
  | PlayerInventorySlot(PlayerInventorySlot.t)
  | WorldDataRequest(WorldDataRequest.t)
  | WorldInfo(WorldInfo.t)
  | InitialTileSectionsRequest(InitialTileSectionsRequest.t)
  | Status(Status.t)
  | TileSectionSend(TileSectionSend.t)
  | TileSectionFrame(TileSectionFrame.t)
  | PlayerSpawn(PlayerSpawn.t)
  | PlayerUpdate(PlayerUpdate.t)
  | PlayerActive(PlayerActive.t)
  | PlayerHealth(PlayerHealth.t)
  | TileModify(TileModify.t)
  | TimeSet(TimeSet.t)
  | DoorUse(DoorUse.t)
  | TileSquareSend(TileSquareSend.t)
  | ItemDropUpdate(ItemDropUpdate.t)
  | ItemOwner(ItemOwner.t)
  | NpcUpdate(NpcUpdate.t)
  | NpcItemStrike(NpcItemStrike.t)
  | ProjectileSync(ProjectileSync.t)
  | NpcStrike(NpcStrike.t)
  | ProjectileDestroy(ProjectileDestroy.t)
  | PvpToggle(PvpToggle.t)
  | ChestOpen(ChestOpen.t)
  | ChestItem(ChestItem.t)
  | ActiveContainerSync(ActiveContainerSync.t)
  | ChestPlace(ChestPlace.t)
  | HealEffect(HealEffect.t)
  | Zones(Zones.t)
  | PasswordRequired(PasswordRequired.t)
  | PasswordSend(PasswordSend.t)
  | ItemOwnerRemove(ItemOwnerRemove.t)
  | NpcTalk(NpcTalk.t)
  | PlayerAnimation(PlayerAnimation.t)
  | PlayerMana(PlayerMana.t)
  | ManaEffect(ManaEffect.t)
  | PlayerTeam(PlayerTeam.t)
  | SignRead(SignRead.t)
  | SignNew(SignNew.t)
  | LiquidSet(LiquidSet.t)
  | PlayerSpawnSelf(PlayerSpawnSelf.t)
  | PlayerBuffsSet(PlayerBuffsSet.t)
  | NpcSpecialEffect(NpcSpecialEffect.t)
  | ChestOrTempleUnlock(ChestOrTempleUnlock.t)
  | NpcBuffAdd(NpcBuffAdd.t)
  | NpcBuffUpdate(NpcBuffUpdate.t)
  | PlayerBuffAdd(PlayerBuffAdd.t)
  | NpcNameUpdate(NpcNameUpdate.t)
  | GoodEvilUpdate(GoodEvilUpdate.t)
  | HarpPlay(HarpPlay.t)
  | SwitchHit(SwitchHit.t)
  | NpcHomeUpdate(NpcHomeUpdate.t)
  | BossOrInvasionSpawn(BossOrInvasionSpawn.t)
  | PlayerDodge(PlayerDodge.t)
  | TilePaint(TilePaint.t)
  | WallPaint(WallPaint.t)
  | Teleport(Teleport.t)
  | PlayerHealOther(PlayerHealOther.t)
  | DimensionsUpdate(DimensionsUpdate.t)
  | ClientUuid(ClientUuid.t)
  | ChestName(ChestName.t)
  | NpcCatch(NpcCatch.t)
  | NpcRelease(NpcRelease.t)
  | TravellingMerchantInventory(TravellingMerchantInventory.t)
  | TeleportationPotion(TeleportationPotion.t)
  | AnglerQuest(AnglerQuest.t)
  | AnglerQuestComplete(AnglerQuestComplete.t)
  | AnglerQuestsCompletedAmount(AnglerQuestsCompletedAmount.t)
  | TemporaryAnimationCreate(TemporaryAnimationCreate.t)
  | InvasionProgressReport(InvasionProgressReport.t)
  | ObjectPlace(ObjectPlace.t)
  | PlayerChestIndexSync(PlayerChestIndexSync.t)
  | CombatNumberCreate(CombatNumberCreate.t)
  | NetModuleLoad(NetModuleLoad.t)
  | NpcKillCount(NpcKillCount.t)
  | PlayerStealth(PlayerStealth.t)
  | ItemForceIntoNearestChest(ItemForceIntoNearestChest.t)
  | TileEntityUpdate(TileEntityUpdate.t)
  | TileEntityPlace(TileEntityPlace.t)
  | ItemDropModify(ItemDropModify.t)
  | ItemFramePlace(ItemFramePlace.t)
  | ItemDropInstancedUpdate(ItemDropInstancedUpdate.t)
  | EmoteBubble(EmoteBubble.t)
  | ExtraValueSync(ExtraValueSync.t)
  | SocialHandshake(SocialHandshake.t)
  | Unused(Unused.t)
  | PortalKill(PortalKill.t)
  | PlayerTeleportPortal(PlayerTeleportPortal.t)
  | NpcKilledNotification(NpcKilledNotification.t)
  | EventNotification(EventNotification.t)
  | MinionTargetUpdate(MinionTargetUpdate.t)
  | NpcTeleportPortal(NpcTeleportPortal.t)
  | ShieldStrengthsUpdate(ShieldStrengthsUpdate.t)
  | NebulaLevelUp(NebulaLevelUp.t)
  | MoonLordCountdown(MoonLordCountdown.t)
  | NpcShopItem(NpcShopItem.t)
  | GemLockToggle(GemLockToggle.t)
  | SmokePoof(SmokePoof.t)
  | ChatMessageSmart(ChatMessageSmart.t)
  | WiredCannonShot(WiredCannonShot.t)
  | MassWireOperation(MassWireOperation.t)
  | MassWireOperationPay(MassWireOperationPay.t)
  | PartyToggle(PartyToggle.t)
  | TreeGrowFx(TreeGrowFx.t)
  | CrystalInvasionStart(CrystalInvasionStart.t)
  | CrystalInvasionWipeAll(CrystalInvasionWipeAll.t)
  | MinionAttackTargetUpdate(MinionAttackTargetUpdate.t)
  | CrystalInvasionSendWaitTime(CrystalInvasionSendWaitTime.t)
  | PlayerDamage(PlayerDamage.t)
  | PlayerDeath(PlayerDeath.t)
  | CombatTextCreate(CombatTextCreate.t)
  | Emoji(Emoji.t)
  | TileEntityDisplayDollItemSync(TileEntityDisplayDollItemSync.t)
  | TileEntityInteractionRequest(TileEntityInteractionRequest.t)
  | WeaponsRackTryPlacing(WeaponsRackTryPlacing.t)
  | TileEntityHatRackItemSync(TileEntityHatRackItemSync.t)
  | TilePickingSync(TilePickingSync.t)
  | RevengeMarkerSync(RevengeMarkerSync.t)
  | RevengeMarkerRemove(RevengeMarkerRemove.t)
  | GolfBallLandInCup(GolfBallLandInCup.t)
  | ClientFinishConnectingToServer(ClientFinishConnectingToServer.t)
  | NpcFishOut(NpcFishOut.t)
  | NpcTamper(NpcTamper.t)
  | LegacySoundPlay(LegacySoundPlay.t)
  | FoodPlatterTryPlacing(FoodPlatterTryPlacing.t)
  | PlayerLuckFactorsUpdate(PlayerLuckFactorsUpdate.t)
  | PlayerDead(PlayerDead.t)
  | CavernMonsterTypeSync(CavernMonsterTypeSync.t)
  | NpcBuffRemovalRequest(NpcBuffRemovalRequest.t)
  | ClientSyncedInventory(ClientSyncedInventory.t)
  | CountsAsHostForGameplaySet(CountsAsHostForGameplaySet.t)
  | CreditsOrSlimeTransform(CreditsOrSlimeTransform.t)
  | LucyAxeMessage(LucyAxeMessage.t)
  | PiggyBankVoidLensUpdate(PiggyBankVoidLensUpdate.t)
  | DungeonDefendersEventAttemptSkipWait(DungeonDefendersEventAttemptSkipWait.t)
  | HaveDryadDoStardewAnimation(HaveDryadDoStardewAnimation.t)
  | ItemDropShimmeredUpdate(ItemDropShimmeredUpdate.t)
  | ShimmerEffectOrCoinLuck(ShimmerEffectOrCoinLuck.t)
  | LoadoutSwitch(LoadoutSwitch.t)
  | ItemDropProtectedUpdate(ItemDropProtectedUpdate.t)

module LazyPacket = {
  type lazyParsed<'a> = Lazy.t<result<'a, ErrorAwarePacketReader.readError>>
  type t =
    | ConnectRequest(lazyParsed<ConnectRequest.t>)
    | Disconnect(lazyParsed<Disconnect.t>)
    | PlayerSlotSet(lazyParsed<PlayerSlotSet.t>)
    | PlayerInfo(lazyParsed<PlayerInfo.t>)
    | PlayerInventorySlot(lazyParsed<PlayerInventorySlot.t>)
    | WorldDataRequest(lazyParsed<WorldDataRequest.t>)
    | WorldInfo(lazyParsed<WorldInfo.t>)
    | InitialTileSectionsRequest(lazyParsed<InitialTileSectionsRequest.t>)
    | Status(lazyParsed<Status.t>)
    | TileSectionSend(lazyParsed<TileSectionSend.t>)
    | TileSectionFrame(lazyParsed<TileSectionFrame.t>)
    | PlayerSpawn(lazyParsed<PlayerSpawn.t>)
    | PlayerUpdate(lazyParsed<PlayerUpdate.t>)
    | PlayerActive(lazyParsed<PlayerActive.t>)
    | PlayerHealth(lazyParsed<PlayerHealth.t>)
    | TileModify(lazyParsed<TileModify.t>)
    | TimeSet(lazyParsed<TimeSet.t>)
    | DoorUse(lazyParsed<DoorUse.t>)
    | TileSquareSend(lazyParsed<TileSquareSend.t>)
    | ItemDropUpdate(lazyParsed<ItemDropUpdate.t>)
    | ItemOwner(lazyParsed<ItemOwner.t>)
    | NpcUpdate(lazyParsed<NpcUpdate.t>)
    | NpcItemStrike(lazyParsed<NpcItemStrike.t>)
    | ProjectileSync(lazyParsed<ProjectileSync.t>)
    | NpcStrike(lazyParsed<NpcStrike.t>)
    | ProjectileDestroy(lazyParsed<ProjectileDestroy.t>)
    | PvpToggle(lazyParsed<PvpToggle.t>)
    | ChestOpen(lazyParsed<ChestOpen.t>)
    | ChestItem(lazyParsed<ChestItem.t>)
    | ActiveContainerSync(lazyParsed<ActiveContainerSync.t>)
    | ChestPlace(lazyParsed<ChestPlace.t>)
    | HealEffect(lazyParsed<HealEffect.t>)
    | Zones(lazyParsed<Zones.t>)
    | PasswordRequired(lazyParsed<PasswordRequired.t>)
    | PasswordSend(lazyParsed<PasswordSend.t>)
    | ItemOwnerRemove(lazyParsed<ItemOwnerRemove.t>)
    | NpcTalk(lazyParsed<NpcTalk.t>)
    | PlayerAnimation(lazyParsed<PlayerAnimation.t>)
    | PlayerMana(lazyParsed<PlayerMana.t>)
    | ManaEffect(lazyParsed<ManaEffect.t>)
    | PlayerTeam(lazyParsed<PlayerTeam.t>)
    | SignRead(lazyParsed<SignRead.t>)
    | SignNew(lazyParsed<SignNew.t>)
    | LiquidSet(lazyParsed<LiquidSet.t>)
    | PlayerSpawnSelf(lazyParsed<PlayerSpawnSelf.t>)
    | PlayerBuffsSet(lazyParsed<PlayerBuffsSet.t>)
    | NpcSpecialEffect(lazyParsed<NpcSpecialEffect.t>)
    | ChestOrTempleUnlock(lazyParsed<ChestOrTempleUnlock.t>)
    | NpcBuffAdd(lazyParsed<NpcBuffAdd.t>)
    | NpcBuffUpdate(lazyParsed<NpcBuffUpdate.t>)
    | PlayerBuffAdd(lazyParsed<PlayerBuffAdd.t>)
    | NpcNameUpdate(lazyParsed<NpcNameUpdate.t>)
    | GoodEvilUpdate(lazyParsed<GoodEvilUpdate.t>)
    | HarpPlay(lazyParsed<HarpPlay.t>)
    | SwitchHit(lazyParsed<SwitchHit.t>)
    | NpcHomeUpdate(lazyParsed<NpcHomeUpdate.t>)
    | BossOrInvasionSpawn(lazyParsed<BossOrInvasionSpawn.t>)
    | PlayerDodge(lazyParsed<PlayerDodge.t>)
    | TilePaint(lazyParsed<TilePaint.t>)
    | WallPaint(lazyParsed<WallPaint.t>)
    | Teleport(lazyParsed<Teleport.t>)
    | PlayerHealOther(lazyParsed<PlayerHealOther.t>)
    | DimensionsUpdate(lazyParsed<DimensionsUpdate.t>)
    | ClientUuid(lazyParsed<ClientUuid.t>)
    | ChestName(lazyParsed<ChestName.t>)
    | NpcCatch(lazyParsed<NpcCatch.t>)
    | NpcRelease(lazyParsed<NpcRelease.t>)
    | TravellingMerchantInventory(lazyParsed<TravellingMerchantInventory.t>)
    | TeleportationPotion(lazyParsed<TeleportationPotion.t>)
    | AnglerQuest(lazyParsed<AnglerQuest.t>)
    | AnglerQuestComplete(lazyParsed<AnglerQuestComplete.t>)
    | AnglerQuestsCompletedAmount(lazyParsed<AnglerQuestsCompletedAmount.t>)
    | TemporaryAnimationCreate(lazyParsed<TemporaryAnimationCreate.t>)
    | InvasionProgressReport(lazyParsed<InvasionProgressReport.t>)
    | ObjectPlace(lazyParsed<ObjectPlace.t>)
    | PlayerChestIndexSync(lazyParsed<PlayerChestIndexSync.t>)
    | CombatNumberCreate(lazyParsed<CombatNumberCreate.t>)
    | NetModuleLoad(lazyParsed<NetModuleLoad.t>)
    | NpcKillCount(lazyParsed<NpcKillCount.t>)
    | PlayerStealth(lazyParsed<PlayerStealth.t>)
    | ItemForceIntoNearestChest(lazyParsed<ItemForceIntoNearestChest.t>)
    | TileEntityUpdate(lazyParsed<TileEntityUpdate.t>)
    | TileEntityPlace(lazyParsed<TileEntityPlace.t>)
    | ItemDropModify(lazyParsed<ItemDropModify.t>)
    | ItemFramePlace(lazyParsed<ItemFramePlace.t>)
    | ItemDropInstancedUpdate(lazyParsed<ItemDropInstancedUpdate.t>)
    | EmoteBubble(lazyParsed<EmoteBubble.t>)
    | ExtraValueSync(lazyParsed<ExtraValueSync.t>)
    | SocialHandshake(lazyParsed<SocialHandshake.t>)
    | Unused(lazyParsed<Unused.t>)
    | PortalKill(lazyParsed<PortalKill.t>)
    | PlayerTeleportPortal(lazyParsed<PlayerTeleportPortal.t>)
    | NpcKilledNotification(lazyParsed<NpcKilledNotification.t>)
    | EventNotification(lazyParsed<EventNotification.t>)
    | MinionTargetUpdate(lazyParsed<MinionTargetUpdate.t>)
    | NpcTeleportPortal(lazyParsed<NpcTeleportPortal.t>)
    | ShieldStrengthsUpdate(lazyParsed<ShieldStrengthsUpdate.t>)
    | NebulaLevelUp(lazyParsed<NebulaLevelUp.t>)
    | MoonLordCountdown(lazyParsed<MoonLordCountdown.t>)
    | NpcShopItem(lazyParsed<NpcShopItem.t>)
    | GemLockToggle(lazyParsed<GemLockToggle.t>)
    | SmokePoof(lazyParsed<SmokePoof.t>)
    | ChatMessageSmart(lazyParsed<ChatMessageSmart.t>)
    | WiredCannonShot(lazyParsed<WiredCannonShot.t>)
    | MassWireOperation(lazyParsed<MassWireOperation.t>)
    | MassWireOperationPay(lazyParsed<MassWireOperationPay.t>)
    | PartyToggle(lazyParsed<PartyToggle.t>)
    | TreeGrowFx(lazyParsed<TreeGrowFx.t>)
    | CrystalInvasionStart(lazyParsed<CrystalInvasionStart.t>)
    | CrystalInvasionWipeAll(lazyParsed<CrystalInvasionWipeAll.t>)
    | MinionAttackTargetUpdate(lazyParsed<MinionAttackTargetUpdate.t>)
    | CrystalInvasionSendWaitTime(lazyParsed<CrystalInvasionSendWaitTime.t>)
    | PlayerDamage(lazyParsed<PlayerDamage.t>)
    | PlayerDeath(lazyParsed<PlayerDeath.t>)
    | CombatTextCreate(lazyParsed<CombatTextCreate.t>)
    | Emoji(lazyParsed<Emoji.t>)
    | TileEntityDisplayDollItemSync(lazyParsed<TileEntityDisplayDollItemSync.t>)
    | TileEntityInteractionRequest(lazyParsed<TileEntityInteractionRequest.t>)
    | WeaponsRackTryPlacing(lazyParsed<WeaponsRackTryPlacing.t>)
    | TileEntityHatRackItemSync(lazyParsed<TileEntityHatRackItemSync.t>)
    | TilePickingSync(lazyParsed<TilePickingSync.t>)
    | RevengeMarkerSync(lazyParsed<RevengeMarkerSync.t>)
    | RevengeMarkerRemove(lazyParsed<RevengeMarkerRemove.t>)
    | GolfBallLandInCup(lazyParsed<GolfBallLandInCup.t>)
    | ClientFinishConnectingToServer(lazyParsed<ClientFinishConnectingToServer.t>)
    | NpcFishOut(lazyParsed<NpcFishOut.t>)
    | NpcTamper(lazyParsed<NpcTamper.t>)
    | LegacySoundPlay(lazyParsed<LegacySoundPlay.t>)
    | FoodPlatterTryPlacing(lazyParsed<FoodPlatterTryPlacing.t>)
    | PlayerLuckFactorsUpdate(lazyParsed<PlayerLuckFactorsUpdate.t>)
    | PlayerDead(lazyParsed<PlayerDead.t>)
    | CavernMonsterTypeSync(lazyParsed<CavernMonsterTypeSync.t>)
    | NpcBuffRemovalRequest(lazyParsed<NpcBuffRemovalRequest.t>)
    | ClientSyncedInventory(lazyParsed<ClientSyncedInventory.t>)
    | CountsAsHostForGameplaySet(lazyParsed<CountsAsHostForGameplaySet.t>)
    | CreditsOrSlimeTransform(lazyParsed<CreditsOrSlimeTransform.t>)
    | LucyAxeMessage(lazyParsed<LucyAxeMessage.t>)
    | PiggyBankVoidLensUpdate(lazyParsed<PiggyBankVoidLensUpdate.t>)
    | DungeonDefendersEventAttemptSkipWait(lazyParsed<DungeonDefendersEventAttemptSkipWait.t>)
    | HaveDryadDoStardewAnimation(lazyParsed<HaveDryadDoStardewAnimation.t>)
    | ItemDropShimmeredUpdate(lazyParsed<ItemDropShimmeredUpdate.t>)
    | ShimmerEffectOrCoinLuck(lazyParsed<ShimmerEffectOrCoinLuck.t>)
    | LoadoutSwitch(lazyParsed<LoadoutSwitch.t>)
    | ItemDropProtectedUpdate(lazyParsed<ItemDropProtectedUpdate.t>)

  let toPacketName = (packet: t): string => {
    switch packet {
    | ConnectRequest(_connectRequest) => "ConnectRequest"
    | Disconnect(_disconnect) => "Disconnect"
    | PlayerSlotSet(_playerSlotSet) => "PlayerSlotSet"
    | PlayerInfo(_playerInfo) => "PlayerInfo"
    | PlayerInventorySlot(_playerInventorySlot) => "PlayerInventorySlot"
    | WorldDataRequest(_worldDataRequest) => "WorldDataRequest"
    | WorldInfo(_worldInfo) => "WorldInfo"
    | InitialTileSectionsRequest(_initialTileSectionsRequest) => "InitialTileSectionsRequest"
    | Status(_status) => "Status"
    | TileSectionSend(_tileSectionSend) => "TileSectionSend"
    | TileSectionFrame(_tileSectionFrame) => "TileSectionFrame"
    | PlayerSpawn(_playerSpawn) => "PlayerSpawn"
    | PlayerUpdate(_playerUpdate) => "PlayerUpdate"
    | PlayerActive(_playerActive) => "PlayerActive"
    | PlayerHealth(_playerHealth) => "PlayerHealth"
    | TileModify(_tileModify) => "TileModify"
    | TimeSet(_timeSet) => "TimeSet"
    | DoorUse(_doorUse) => "DoorUse"
    | TileSquareSend(_tileSquareSend) => "TileSquareSend"
    | ItemDropUpdate(_itemDropUpdate) => "ItemDropUpdate"
    | ItemOwner(_itemOwner) => "ItemOwner"
    | NpcUpdate(_npcUpdate) => "NpcUpdate"
    | NpcItemStrike(_npcItemStrike) => "NpcItemStrike"
    | ProjectileSync(_projectileSync) => "ProjecitleSync"
    | NpcStrike(_npcStrike) => "NpcStrike"
    | ProjectileDestroy(_projectileDestroy) => "ProjectileDestroy"
    | PvpToggle(_pvpToggle) => "PvpToggle"
    | ChestOpen(_chestOpen) => "ChestOpen"
    | ChestItem(_chestItem) => "ChestItem"
    | ActiveContainerSync(_activeContainerSync) => "ActiveContainerSync"
    | ChestPlace(_chestPlace) => "ChestPlace"
    | HealEffect(_healEffect) => "HealEffect"
    | Zones(_zones) => "Zones"
    | PasswordRequired(_passwordRequired) => "PasswordRequired"
    | PasswordSend(_passwordSend) => "PasswordSend"
    | ItemOwnerRemove(_itemOwnerRemove) => "ItemOwnerRemove"
    | NpcTalk(_npcTalk) => "NpcTalk"
    | PlayerAnimation(_playerAnimation) => "PlayerAnimation"
    | PlayerMana(_playerMana) => "PlayerMana"
    | ManaEffect(_manaEffect) => "ManaEffect"
    | PlayerTeam(_playerTeam) => "PlayerTeam"
    | SignRead(_signRead) => "SignRead"
    | SignNew(_signNew) => "SignNew"
    | LiquidSet(_liquidSet) => "LiquidSet"
    | PlayerSpawnSelf(_playerSpawnSelf) => "PlayerSpawnSelf"
    | PlayerBuffsSet(_playerBuffsSet) => "PlayerBuffsSet"
    | NpcSpecialEffect(_npcSpecialEffect) => "NpcSpecialEffect"
    | ChestOrTempleUnlock(_chestUnlock) => "ChestOrTempleUnlock"
    | NpcBuffAdd(_npcBuffAdd) => "NpcBuffAdd"
    | NpcBuffUpdate(_npcBuffUpdate) => "NpcBuffUpdate"
    | PlayerBuffAdd(_playerBuffAdd) => "PlayerBuffAdd"
    | NpcNameUpdate(_npcNameUpdate) => "NpcNameUpdate"
    | GoodEvilUpdate(_goodEvilUpdate) => "GoodEvilUpdate"
    | HarpPlay(_harpPlay) => "HarpPlay"
    | SwitchHit(_switchHit) => "SwitchHit"
    | NpcHomeUpdate(_npcHomeUpdate) => "NpcHomeUpdate"
    | BossOrInvasionSpawn(_bossOrInvasionSpawn) => "BossOrInvasionSpawn"
    | PlayerDodge(_playerDodge) => "PlayerDodge"
    | TilePaint(_tilePaint) => "TilePaint"
    | WallPaint(_wallPaint) => "WallPaint"
    | Teleport(_teleport) => "Teleport"
    | PlayerHealOther(_playerHealOther) => "PlayerHealOther"
    | DimensionsUpdate(_dimensionsUpdate) => "DimensionsUpdate"
    | ClientUuid(_clientUuid) => "ClientUuid"
    | ChestName(_chestName) => "ChestName"
    | NpcCatch(_catchNpc) => "NpcCatch"
    | NpcRelease(_releaseNpc) => "NpcRelease"
    | TravellingMerchantInventory(_travellingMerchantInventory) => "TravellingMerchantInventory"
    | TeleportationPotion(_teleportationPotion) => "TeleportationPotion"
    | AnglerQuest(_anglerQuest) => "AnglerQuest"
    | AnglerQuestComplete(_anglerQuestComplete) => "AnglerQuestComplete"
    | AnglerQuestsCompletedAmount(_anglerQuestsCompletedAmount) => "AnglerQuestsCompletedAmount"
    | TemporaryAnimationCreate(_temporaryAnimationCreate) => "TemporaryAnimationCreate"
    | InvasionProgressReport(_invasionProgressReport) => "InvasionProgressReport"
    | ObjectPlace(_objectPlace) => "ObjectPlace"
    | PlayerChestIndexSync(_playerChestIndexSync) => "PlayerChestIndexSync"
    | CombatNumberCreate(_combatNumberCreate) => "CombatNumberCreate"
    | NetModuleLoad(_netModuleLoad) => "NetModuleLoad"
    | NpcKillCount(_npcKillCount) => "NpcKillCount"
    | PlayerStealth(_playerStealth) => "PlayerStealth"
    | ItemForceIntoNearestChest(_itemForceIntoNearestChest) => "ItemForceIntoNearestChest"
    | TileEntityUpdate(_tileEntityUpdate) => "TileEntityUpdate"
    | TileEntityPlace(_tileEntityPlace) => "TileEntityPlace"
    | ItemDropModify(_itemDropModify) => "ItemDropModify"
    | ItemFramePlace(_itemFramePlace) => "ItemFramePlace"
    | ItemDropInstancedUpdate(_itemDropInstancedUpdate) => "ItemDropInstancedUpdate"
    | EmoteBubble(_emoteBubble) => "EmoteBubble"
    | ExtraValueSync(_extraValueSync) => "ExtraValueSync"
    | SocialHandshake(_socialHandshake) => "SocialHandshake"
    | Unused(_unused) => "Unused"
    | PortalKill(_portalKill) => "PortalKill"
    | PlayerTeleportPortal(_playerTeleportPortal) => "PlayerTeleportPortal"
    | NpcKilledNotification(_npcKilledNotification) => "NpcKilledNotification"
    | EventNotification(_eventNotification) => "EventNotification"
    | MinionTargetUpdate(_minionTargetUpdate) => "MinionTargetUpdate"
    | NpcTeleportPortal(_npcTeleportPortal) => "NpcTeleportPortal"
    | ShieldStrengthsUpdate(_shieldStrengthsUpdate) => "ShieldStrengthsUpdate"
    | NebulaLevelUp(_nebulaLevelUp) => "NebulaLevelUp"
    | MoonLordCountdown(_moonLordCountdown) => "MoonLordCountdown"
    | NpcShopItem(_npcShopItem) => "NpcShopItem"
    | GemLockToggle(_gemLockToggle) => "GemLockToggle"
    | SmokePoof(_smokePoof) => "SmokePoof"
    | ChatMessageSmart(_chatMessageSmart) => "ChatMessageSmart"
    | WiredCannonShot(_wiredCannonShot) => "WiredCannonShot"
    | MassWireOperation(_massWireOperation) => "MassWireOperation"
    | MassWireOperationPay(_massWireOperationPay) => "MassWireOperationPay"
    | PartyToggle(_partyToggle) => "PartyToggle"
    | TreeGrowFx(_treeGrowFx) => "TreeGrowFx"
    | CrystalInvasionStart(_crystalInvasionStart) => "CrystalInvasionStart"
    | CrystalInvasionWipeAll(_crystalInvasionWipeAll) => "CrystalInvasionWipeAll"
    | MinionAttackTargetUpdate(_minionAttackTargetUpdate) => "MinionAttackTargetUpdate"
    | CrystalInvasionSendWaitTime(_crystalInvasionSendWaitTime) => "CrystalInvasionSendWaitTime"
    | PlayerDamage(_playerDamage) => "PlayerDamage"
    | PlayerDeath(_playerDeath) => "PlayerDeath"
    | CombatTextCreate(_combatTextCreate) => "CombatTextCreate"
    | Emoji(_emoji) => "Emoji"
    | TileEntityDisplayDollItemSync(
        _tileEntityDisplayDollItemSync,
      ) => "TileEntityDisplayDollItemSync"
    | TileEntityInteractionRequest(_tileEntityInteractionRequest) => "TileEntityInteractionRequest"
    | WeaponsRackTryPlacing(_weaponsRackTryPlacing) => "WeaponsRackTryPlacing"
    | TileEntityHatRackItemSync(_tileEntityHatRackItemSync) => "TileEntityHatRackItemSync"
    | TilePickingSync(_tilePickingSync) => "TilePickingSync"
    | RevengeMarkerSync(_revengeMarkerSync) => "RevengeMarkerSync"
    | RevengeMarkerRemove(_revengeMarkerRemove) => "RevengeMarkerRemove"
    | GolfBallLandInCup(_golfBallLandInCup) => "GolfBallLandInCup"
    | ClientFinishConnectingToServer(
        _clientFinishConnectingToServer,
      ) => "ClientFinishConnectingToServer"
    | NpcFishOut(_npcFishOut) => "NpcFishOut"
    | NpcTamper(_npcTamper) => "NpcTamper"
    | LegacySoundPlay(_legacySoundPlay) => "LegacySoundPlay"
    | FoodPlatterTryPlacing(_foodPlatterTryPlacing) => "FoodPlatterTryPlacing"
    | PlayerLuckFactorsUpdate(_playerLuckFactorsUpdate) => "PlayerLuckFactorsUpdate"
    | PlayerDead(_playerDead) => "PlayerDead"
    | CavernMonsterTypeSync(_cavernMonsterTypeSync) => "CavernMonsterTypeSync"
    | NpcBuffRemovalRequest(_npcBuffRemovalRequest) => "NpcBuffRemovalRequest"
    | ClientSyncedInventory(_clientSyncedInventory) => "ClientSyncedInventory"
    | CountsAsHostForGameplaySet(_countsAsHostForGameplaySet) => "CountsAsHostForGameplaySet"
    | CreditsOrSlimeTransform(_creditsOrSlimeTransform) => "CreditsOrSlimeTransform"
    | LucyAxeMessage(_lucyAxeMessage) => "LucyAxeMessage"
    | PiggyBankVoidLensUpdate(_piggyBankVoidLensUpdate) => "PiggyBankVoidLensUpdate"
    | DungeonDefendersEventAttemptSkipWait(
        _dungeonDefendersEventAttemptSkipWait,
      ) => "DungeonDefendersEventAttemptSkipWait"
    | HaveDryadDoStardewAnimation(_haveDryadDoStardewAnimation) => "HaveDryadDoStardewAnimation"
    | ItemDropShimmeredUpdate(_itemDropShimmeredUpdate) => "ItemDropShimmeredUpdate"
    | ShimmerEffectOrCoinLuck(_shimmerEffectOrCoinLuck) => "ShimmerEffectOrCoinLuck"
    | LoadoutSwitch(_loadoutSwitch) => "LoadoutSwitch"
    | ItemDropProtectedUpdate(_itemDropProtectedUpdate) => "ItemDropProtectedUpdate"
    }
  }
}

let toBuffer = (packet: t, _fromServer: bool): ISerializer.toBufferResult => {
  switch packet {
  | ConnectRequest(connectRequest) =>
    ConnectRequest.toBuffer(connectRequest)->ISerializer.toBufferResult
  | Disconnect(disconnect) => Disconnect.toBuffer(disconnect)->ISerializer.toBufferResult
  | PlayerSlotSet(playerSlotSet) =>
    PlayerSlotSet.toBuffer(playerSlotSet)->ISerializer.toBufferResult
  | PlayerInfo(playerInfo) => PlayerInfo.toBuffer(playerInfo)->ISerializer.toBufferResult
  | PlayerInventorySlot(playerInventorySlot) =>
    PlayerInventorySlot.toBuffer(playerInventorySlot)->ISerializer.toBufferResult
  | WorldDataRequest(worldDataRequest) =>
    WorldDataRequest.toBuffer(worldDataRequest)->ISerializer.toBufferResult
  | WorldInfo(worldInfo) => WorldInfo.toBuffer(worldInfo)->ISerializer.toBufferResult
  | InitialTileSectionsRequest(initialTileSectionsRequest) =>
    InitialTileSectionsRequest.toBuffer(initialTileSectionsRequest)->ISerializer.toBufferResult
  | Status(status) => Status.toBuffer(status)->ISerializer.toBufferResult
  | TileSectionSend(tileSectionSend) =>
    TileSectionSend.toBuffer(tileSectionSend)->ISerializer.toBufferResult
  | TileSectionFrame(tileSectionFrame) =>
    TileSectionFrame.toBuffer(tileSectionFrame)->ISerializer.toBufferResult
  | PlayerSpawn(playerSpawn) => PlayerSpawn.toBuffer(playerSpawn)->ISerializer.toBufferResult
  | PlayerUpdate(playerUpdate) => PlayerUpdate.toBuffer(playerUpdate)->ISerializer.toBufferResult
  | PlayerActive(playerActive) => PlayerActive.toBuffer(playerActive)->ISerializer.toBufferResult
  | PlayerHealth(playerHealth) => PlayerHealth.toBuffer(playerHealth)->ISerializer.toBufferResult
  | TileModify(tileModify) => TileModify.toBuffer(tileModify)->ISerializer.toBufferResult
  | TimeSet(_timeSet) => NotImplemented
  | DoorUse(_doorUse) => NotImplemented
  | TileSquareSend(tileSquareSend) =>
    TileSquareSend.toBuffer(tileSquareSend)->ISerializer.toBufferResult
  | ItemDropUpdate(itemDropUpdate) =>
    ItemDropUpdate.toBuffer(itemDropUpdate)->ISerializer.toBufferResult
  | ItemOwner(itemOwner) => ItemOwner.toBuffer(itemOwner)->ISerializer.toBufferResult
  | NpcUpdate(npcUpdate) => NpcUpdate.toBuffer(npcUpdate)->ISerializer.toBufferResult
  | NpcItemStrike(_npcItemStrike) => NotImplemented
  | ProjectileSync(projectileSync) =>
    ProjectileSync.toBuffer(projectileSync)->ISerializer.toBufferResult
  | NpcStrike(_npcStrike) => NotImplemented
  | ProjectileDestroy(projectileDestroy) =>
    ProjectileDestroy.toBuffer(projectileDestroy)->ISerializer.toBufferResult
  | PvpToggle(_pvpToggle) => NotImplemented
  | ChestOpen(_chestOpen) => NotImplemented
  | ChestItem(chestItem) => Ok(ChestItem.toBuffer(chestItem))
  | ActiveContainerSync(activeContainerSync) =>
    Ok(ActiveContainerSync.toBuffer(activeContainerSync))
  | ChestPlace(chestPlace) => ChestPlace.toBuffer(chestPlace)->ISerializer.toBufferResult
  | HealEffect(healEffect) => Ok(HealEffect.toBuffer(healEffect))
  | Zones(_zones) => NotImplemented
  | PasswordRequired(_passwordRequired) => NotImplemented
  | PasswordSend(_passwordSend) => NotImplemented
  | ItemOwnerRemove(itemOwnerRemove) => Ok(ItemOwnerRemove.toBuffer(itemOwnerRemove))
  | NpcTalk(_npcTalk) => NotImplemented
  | PlayerAnimation(_playerAnimation) => NotImplemented
  | PlayerMana(playerMana) => PlayerMana.toBuffer(playerMana)->ISerializer.toBufferResult
  | ManaEffect(manaEffect) => Ok(ManaEffect.toBuffer(manaEffect))
  | PlayerTeam(_playerTeam) => NotImplemented
  | SignRead(_signRead) => NotImplemented
  | SignNew(_signNew) => NotImplemented
  | LiquidSet(_liquidSet) => NotImplemented
  | PlayerSpawnSelf(_playerSpawnSelf) => NotImplemented
  | PlayerBuffsSet(playerBuffsSet) =>
    PlayerBuffsSet.toBuffer(playerBuffsSet)->ISerializer.toBufferResult
  | NpcSpecialEffect(_npcSpecialEffect) => NotImplemented
  | ChestOrTempleUnlock(_chestOrTempleUnlock) => NotImplemented
  | NpcBuffAdd(_npcBuffAdd) => NotImplemented
  | NpcBuffUpdate(_npcBuffUpdate) => NotImplemented
  | PlayerBuffAdd(_playerBuffAdd) => NotImplemented
  | NpcNameUpdate(_npcNameUpdate) => NotImplemented
  | GoodEvilUpdate(_goodEvilUpdate) => NotImplemented
  | HarpPlay(_harpPlay) => NotImplemented
  | SwitchHit(_switchHit) => NotImplemented
  | NpcHomeUpdate(_npcHomeUpdate) => NotImplemented
  | BossOrInvasionSpawn(_bossOrInvasionSpawn) => NotImplemented
  | PlayerDodge(_playerDodge) => NotImplemented
  | TilePaint(_tilePaint) => NotImplemented
  | WallPaint(_wallPaint) => NotImplemented
  | Teleport(_teleport) => NotImplemented
  | PlayerHealOther(_playerHealOther) => NotImplemented
  | DimensionsUpdate(dimensionsUpdate) =>
    DimensionsUpdate.toBuffer(dimensionsUpdate)->ISerializer.toBufferResult
  | ClientUuid(clientUuid) => ClientUuid.toBuffer(clientUuid)->ISerializer.toBufferResult
  | ChestName(_chestName) => NotImplemented
  | NpcCatch(_catchNpc) => NotImplemented
  | NpcRelease(_releaseNpc) => NotImplemented
  | TravellingMerchantInventory(_travellingMerchantInventory) => NotImplemented
  | TeleportationPotion(_teleportationPotion) => NotImplemented
  | AnglerQuest(_anglerQuest) => NotImplemented
  | AnglerQuestComplete(_anglerQuestComplete) => NotImplemented
  | AnglerQuestsCompletedAmount(_anglerQuestsCompletedAmount) => NotImplemented
  | TemporaryAnimationCreate(_temporaryAnimationCreate) => NotImplemented
  | InvasionProgressReport(_invasionProgressReport) => NotImplemented
  | ObjectPlace(_objectPlace) => NotImplemented
  | PlayerChestIndexSync(_playerChestIndexSync) => NotImplemented
  | CombatNumberCreate(_combatNumberCreate) => NotImplemented
  | NetModuleLoad(netModuleLoad) =>
    NetModuleLoad.toBuffer(netModuleLoad)->ISerializer.toBufferResult
  | NpcKillCount(_npcKillCount) => NotImplemented
  | PlayerStealth(_playerStealth) => NotImplemented
  | ItemForceIntoNearestChest(_itemForceIntoNearestChest) => NotImplemented
  | TileEntityUpdate(tileEntityUpdate) =>
    TileEntityUpdate.toBuffer(tileEntityUpdate)->ISerializer.toBufferResult
  | TileEntityPlace(tileEntityPlace) =>
    TileEntityPlace.toBuffer(tileEntityPlace)->ISerializer.toBufferResult
  | ItemDropModify(itemDropModify) =>
    ItemDropModify.toBuffer(itemDropModify)->ISerializer.toBufferResult
  | ItemFramePlace(_itemFramePlace) => NotImplemented
  | ItemDropInstancedUpdate(_itemDropInstancedUpdate) => NotImplemented
  | EmoteBubble(emoteBubble) => EmoteBubble.toBuffer(emoteBubble)->ISerializer.toBufferResult
  | ExtraValueSync(_extraValueSync) => NotImplemented
  | SocialHandshake(_socialHandshake) => NotImplemented
  | Unused(_unused) => NotImplemented
  | PortalKill(_portalKill) => NotImplemented
  | PlayerTeleportPortal(_playerTeleportPortal) => NotImplemented
  | NpcKilledNotification(_npcKilledNotification) => NotImplemented
  | EventNotification(_eventNotification) => NotImplemented
  | MinionTargetUpdate(_minionTargetUpdate) => NotImplemented
  | NpcTeleportPortal(_npcTeleportPortal) => NotImplemented
  | ShieldStrengthsUpdate(_shieldStrengthsUpdate) => NotImplemented
  | NebulaLevelUp(_nebulaLevelUp) => NotImplemented
  | MoonLordCountdown(_moonLordCountdown) => NotImplemented
  | NpcShopItem(npcShopItem) => NpcShopItem.toBuffer(npcShopItem)->ISerializer.toBufferResult
  | GemLockToggle(_gemLockToggle) => NotImplemented
  | SmokePoof(smokePoof) => SmokePoof.toBuffer(smokePoof)->ISerializer.toBufferResult
  | ChatMessageSmart(chatMessageSmart) =>
    ChatMessageSmart.toBuffer(chatMessageSmart)->ISerializer.toBufferResult
  | WiredCannonShot(_wiredCannonShot) => NotImplemented
  | MassWireOperation(massWireOperation) =>
    MassWireOperation.toBuffer(massWireOperation)->ISerializer.toBufferResult
  | MassWireOperationPay(massWireOperationPay) =>
    MassWireOperationPay.toBuffer(massWireOperationPay)->ISerializer.toBufferResult
  | PartyToggle(_partyToggle) => NotImplemented
  | TreeGrowFx(_treeGrowFx) => NotImplemented
  | CrystalInvasionStart(_crystalInvasionStart) => NotImplemented
  | CrystalInvasionWipeAll(_crystalInvasionWipeAll) => NotImplemented
  | MinionAttackTargetUpdate(_minionAttackTargetUpdate) => NotImplemented
  | CrystalInvasionSendWaitTime(_crystalInvasionSendWaitTime) => NotImplemented
  | PlayerDamage(_playerDamage) => NotImplemented
  | PlayerDeath(_playerDeath) => NotImplemented
  | CombatTextCreate(_combatTextCreate) => NotImplemented
  | Emoji(emoji) => Ok(Emoji.toBuffer(emoji))
  | TileEntityDisplayDollItemSync(_tileEntityDisplayDollItemSync) => NotImplemented
  | TileEntityInteractionRequest(tileEntityInteractionRequest) =>
    TileEntityInteractionRequest.toBuffer(tileEntityInteractionRequest)
    ->ISerializer.toBufferResult
  | WeaponsRackTryPlacing(_weaponsRackTryPlacing) => NotImplemented
  | TileEntityHatRackItemSync(_tileEntityHatRackItemSync) => NotImplemented
  | TilePickingSync(_tilePickingSync) => NotImplemented
  | RevengeMarkerSync(revengeMarkerSync) =>
    RevengeMarkerSync.toBuffer(revengeMarkerSync)->ISerializer.toBufferResult
  | RevengeMarkerRemove(_revengeMarkerRemove) => NotImplemented
  | GolfBallLandInCup(_golfBallLandInCup) => NotImplemented
  | ClientFinishConnectingToServer(_clientFinishConnectingToServer) => NotImplemented
  | NpcFishOut(_npcFishOut) => NotImplemented
  | NpcTamper(npcTamper) => Ok(NpcTamper.toBuffer(npcTamper))
  | LegacySoundPlay(legacySoundPlay) =>
    LegacySoundPlay.toBuffer(legacySoundPlay)->ISerializer.toBufferResult
  | FoodPlatterTryPlacing(_foodPlatterTryPlacing) => NotImplemented
  | PlayerLuckFactorsUpdate(_playerLuckFactorsUpdate) => NotImplemented
  | PlayerDead(_playerDead) => NotImplemented
  | CavernMonsterTypeSync(_cavernMonsterTypeSync) => NotImplemented
  | NpcBuffRemovalRequest(_npcBuffRemovalRequest) => NotImplemented
  | ClientSyncedInventory(_clientSyncedInventory) => NotImplemented
  | CountsAsHostForGameplaySet(_countsAsHostForGameplaySet) => NotImplemented
  | CreditsOrSlimeTransform(creditsOrSlimeTransform) =>
    Ok(CreditsOrSlimeTransform.toBuffer(creditsOrSlimeTransform))
  | LucyAxeMessage(lucyAxeMessage) => Ok(LucyAxeMessage.toBuffer(lucyAxeMessage))
  | PiggyBankVoidLensUpdate(piggyBankVoidLensUpdate) =>
    Ok(PiggyBankVoidLensUpdate.toBuffer(piggyBankVoidLensUpdate))
  | DungeonDefendersEventAttemptSkipWait(dungeonDefendersEventAttemptSkipWait) =>
    Ok(DungeonDefendersEventAttemptSkipWait.toBuffer(dungeonDefendersEventAttemptSkipWait))
  | HaveDryadDoStardewAnimation(haveDryadDoStardewAnimation) =>
    Ok(HaveDryadDoStardewAnimation.toBuffer(haveDryadDoStardewAnimation))
  | ItemDropShimmeredUpdate(itemDropShimmeredUpdate) =>
    ItemDropShimmeredUpdate.toBuffer(itemDropShimmeredUpdate)->ISerializer.toBufferResult
  | ShimmerEffectOrCoinLuck(shimmerEffectOrCoinLuck) =>
    Ok(ShimmerEffectOrCoinLuck.toBuffer(shimmerEffectOrCoinLuck))
  | LoadoutSwitch(loadoutSwitch) => Ok(LoadoutSwitch.toBuffer(loadoutSwitch))
  | ItemDropProtectedUpdate(itemDropProtectedUpdate) =>
    ItemDropProtectedUpdate.toBuffer(itemDropProtectedUpdate)->ISerializer.toBufferResult
  }
}

let serialize: ISerializer.serialize<t> = (~parsed: IParser.parsed<t>, ~fromServer: bool) =>
  switch parsed {
  | IParser.ShouldSerialize(packet) => toBuffer(packet, fromServer)
  | IParser.SerializeNotNecessary(_, buffer) => Ok(buffer)
  }

let toPacketName = (packet: t): string => {
  switch packet {
  | ConnectRequest(_connectRequest) => "ConnectRequest"
  | Disconnect(disconnect) =>
    `Disconnect(reason: "${disconnect.reason->PacketFactory.NetworkText.toString})"`
  | PlayerSlotSet(_playerSlotSet) => "PlayerSlotSet"
  | PlayerInfo(_playerInfo) => "PlayerInfo"
  | PlayerInventorySlot(_playerInventorySlot) => "PlayerInventorySlot"
  | WorldDataRequest(_worldDataRequest) => "WorldDataRequest"
  | WorldInfo(_worldInfo) => "WorldInfo"
  | InitialTileSectionsRequest(_initialTileSectionsRequest) => "InitialTileSectionsRequest"
  | Status(_status) => "Status"
  | TileSectionSend(_tileSectionSend) => "TileSectionSend"
  | TileSectionFrame(_tileSectionFrame) => "TileSectionFrame"
  | PlayerSpawn(_playerSpawn) => "PlayerSpawn"
  | PlayerUpdate(_playerUpdate) => "PlayerUpdate"
  | PlayerActive(_playerActive) => "PlayerActive"
  | PlayerHealth(_playerHealth) => "PlayerHealth"
  | TileModify(_tileModify) => "TileModify"
  | TimeSet(_timeSet) => "TimeSet"
  | DoorUse(_doorUse) => "DoorUse"
  | TileSquareSend(_tileSquareSend) => "TileSquareSend"
  | ItemDropUpdate(_itemDropUpdate) => "ItemDropUpdate"
  | ItemOwner(_itemOwner) => "ItemOwner"
  | NpcUpdate({npcSlotId, npcTypeId, x, y, vx, vy, target, directionX, directionY}) =>
    `NpcUpdate(npcSlotId: ${npcSlotId->Belt.Int.toString}, npcTypeId: ${npcTypeId->Belt.Int.toString}, x: ${x->Belt.Float.toString}, y: ${y->Belt.Float.toString}, vx: ${vx->Belt.Float.toString}, vy: ${vy->Belt.Float.toString}, target: ${target->Belt.Int.toString}, directionX: ${directionX->string_of_bool}, directionY: ${directionY->string_of_bool})`
  | NpcItemStrike(_npcItemStrike) => "NpcItemStrike"
  | ProjectileSync({projectileId, x, y, vx, vy, owner, projectileType, damage, knockback}) =>
    `ProjectileSync(projectileId: ${projectileId->Belt.Int.toString}, x: ${x->Belt.Float.toString}, y: ${y->Belt.Float.toString}, vx: ${vx->Belt.Float.toString}, vy: ${vy->Belt.Float.toString}, owner: ${owner->Belt.Int.toString}, projectileType: ${projectileType->Belt.Int.toString}, damage: ${damage->Belt.Option.mapWithDefault(
        "None",
        damage => damage->Belt.Int.toString,
      )}, knockback: ${knockback->Belt.Option.mapWithDefault("None", knockback =>
        knockback->Belt.Float.toString
      )})`
  | NpcStrike(_npcStrike) => "NpcStrike"
  | ProjectileDestroy(projectileDestroy) =>
    `ProjectileDestroy(projectileId: ${projectileDestroy.projectileId->Belt.Int.toString}, owner: ${projectileDestroy.owner->Belt.Int.toString})`
  | PvpToggle(_pvpToggle) => "PvpToggle"
  | ChestOpen(_chestOpen) => "ChestOpen"
  | ChestItem(_chestItem) => "ChestItem"
  | ActiveContainerSync(_activeContainerSync) => "ActiveContainerSync"
  | ChestPlace(_chestPlace) => "ChestPlace"
  | HealEffect(_healEffect) => "HealEffect"
  | Zones(_zones) => "Zones"
  | PasswordRequired(_passwordRequired) => "PasswordRequired"
  | PasswordSend(_passwordSend) => "PasswordSend"
  | ItemOwnerRemove(_itemOwnerRemove) => "ItemOwnerRemove"
  | NpcTalk(_npcTalk) => "NpcTalk"
  | PlayerAnimation(_playerAnimation) => "PlayerAnimation"
  | PlayerMana(_playerMana) => "PlayerMana"
  | ManaEffect(_manaEffect) => "ManaEffect"
  | PlayerTeam(_playerTeam) => "PlayerTeam"
  | SignRead(_signRead) => "SignRead"
  | SignNew(_signNew) => "SignNew"
  | LiquidSet(_liquidSet) => "LiquidSet"
  | PlayerSpawnSelf(_playerSpawnSelf) => "PlayerSpawnSelf"
  | PlayerBuffsSet(_playerBuffsSet) => "PlayerBuffsSet"
  | NpcSpecialEffect(_npcSpecialEffect) => "NpcSpecialEffect"
  | ChestOrTempleUnlock(_chestUnlock) => "ChestOrTempleUnlock"
  | NpcBuffAdd(_npcBuffAdd) => "NpcBuffAdd"
  | NpcBuffUpdate(_npcBuffUpdate) => "NpcBuffUpdate"
  | PlayerBuffAdd(_playerBuffAdd) => "PlayerBuffAdd"
  | NpcNameUpdate(_npcNameUpdate) => "NpcNameUpdate"
  | GoodEvilUpdate(_goodEvilUpdate) => "GoodEvilUpdate"
  | HarpPlay(_harpPlay) => "HarpPlay"
  | SwitchHit(_switchHit) => "SwitchHit"
  | NpcHomeUpdate(_npcHomeUpdate) => "NpcHomeUpdate"
  | BossOrInvasionSpawn(_bossOrInvasionSpawn) => "BossOrInvasionSpawn"
  | PlayerDodge(_playerDodge) => "PlayerDodge"
  | TilePaint(_tilePaint) => "TilePaint"
  | WallPaint(_wallPaint) => "WallPaint"
  | Teleport(_teleport) => "Teleport"
  | PlayerHealOther(_playerHealOther) => "PlayerHealOther"
  | DimensionsUpdate(_dimensionsUpdate) => "DimensionsUpdate"
  | ClientUuid(_clientUuid) => "ClientUuid"
  | ChestName(_chestName) => "ChestName"
  | NpcCatch(_catchNpc) => "NpcCatch"
  | NpcRelease(_releaseNpc) => "NpcRelease"
  | TravellingMerchantInventory(_travellingMerchantInventory) => "TravellingMerchantInventory"
  | TeleportationPotion(_teleportationPotion) => "TeleportationPotion"
  | AnglerQuest(_anglerQuest) => "AnglerQuest"
  | AnglerQuestComplete(_anglerQuestComplete) => "AnglerQuestComplete"
  | AnglerQuestsCompletedAmount(_anglerQuestsCompletedAmount) => "AnglerQuestsCompletedAmount"
  | TemporaryAnimationCreate(_temporaryAnimationCreate) => "TemporaryAnimationCreate"
  | InvasionProgressReport(_invasionProgressReport) => "InvasionProgressReport"
  | ObjectPlace(_objectPlace) => "ObjectPlace"
  | PlayerChestIndexSync(_playerChestIndexSync) => "PlayerChestIndexSync"
  | CombatNumberCreate(_combatNumberCreate) => "CombatNumberCreate"
  | NetModuleLoad(netModuleLoad) =>
    "NetModuleLoad(" ++
    switch netModuleLoad {
    | Liquid(_liquid) => "Liquid"
    | ClientText(_commandId, message) => "ClientText(" ++ message ++ ")"
    | ServerText(_playerId, text, _color) =>
      "ServerText(" ++ text->PacketFactory.NetworkText.text ++ ")"
    | Ping(_position) => "Ping"
    | Ambience(_ambience) => "Ambience"
    | Bestiary(_bestiary) => "Bestiary"
    | CreativeUnlocks(_creativeUnlock) => "CreativeUnlocks"
    | CreativePower(creativePower) => `CreativePower { ${creativePower->CreativePowers.toString} }`
    | CreativeUnlocksPlayerReport(_unlockReport) => "CreativeUnlocksPlayerReport"
    | TeleportPylon(_teleportPylon) => "TeleportPylon"
    | Particles(_particle) => "Particles"
    | CreativePowerPermissions(_creativePowerPermission) => "CreativePowerPermissions"
    } ++ ")"
  | NpcKillCount(_npcKillCount) => "NpcKillCount"
  | PlayerStealth(_playerStealth) => "PlayerStealth"
  | ItemForceIntoNearestChest(_itemForceIntoNearestChest) => "ItemForceIntoNearestChest"
  | TileEntityUpdate(_tileEntityUpdate) => "TileEntityUpdate"
  | TileEntityPlace(_tileEntityPlace) => "TileEntityPlace"
  | ItemDropModify(_itemDropModify) => "ItemDropModify"
  | ItemFramePlace(_itemFramePlace) => "ItemFramePlace"
  | ItemDropInstancedUpdate(_itemDropInstancedUpdate) => "ItemDropInstancedUpdate"
  | EmoteBubble(_emoteBubble) => "EmoteBubble"
  | ExtraValueSync(_extraValueSync) => "ExtraValueSync"
  | SocialHandshake(_socialHandshake) => "SocialHandshake"
  | Unused(_unused) => "Unused"
  | PortalKill(_portalKill) => "PortalKill"
  | PlayerTeleportPortal(_playerTeleportPortal) => "PlayerTeleportPortal"
  | NpcKilledNotification(_npcKilledNotification) => "NpcKilledNotification"
  | EventNotification(_eventNotification) => "EventNotification"
  | MinionTargetUpdate(_minionTargetUpdate) => "MinionTargetUpdate"
  | NpcTeleportPortal(_npcTeleportPortal) => "NpcTeleportPortal"
  | ShieldStrengthsUpdate(_shieldStrengthsUpdate) => "ShieldStrengthsUpdate"
  | NebulaLevelUp(_nebulaLevelUp) => "NebulaLevelUp"
  | MoonLordCountdown(_moonLordCountdown) => "MoonLordCountdown"
  | NpcShopItem(_npcShopItem) => "NpcShopItem"
  | GemLockToggle(_gemLockToggle) => "GemLockToggle"
  | SmokePoof(_smokePoof) => "SmokePoof"
  | ChatMessageSmart(_chatMessageSmart) => "ChatMessageSmart"
  | WiredCannonShot(_wiredCannonShot) => "WiredCannonShot"
  | MassWireOperation(_massWireOperation) => "MassWireOperation"
  | MassWireOperationPay(_massWireOperationPay) => "MassWireOperationPay"
  | PartyToggle(_partyToggle) => "PartyToggle"
  | TreeGrowFx(_treeGrowFx) => "TreeGrowFx"
  | CrystalInvasionStart(_crystalInvasionStart) => "CrystalInvasionStart"
  | CrystalInvasionWipeAll(_crystalInvasionWipeAll) => "CrystalInvasionWipeAll"
  | MinionAttackTargetUpdate(_minionAttackTargetUpdate) => "MinionAttackTargetUpdate"
  | CrystalInvasionSendWaitTime(_crystalInvasionSendWaitTime) => "CrystalInvasionSendWaitTime"
  | PlayerDamage(_playerDamage) => "PlayerDamage"
  | PlayerDeath(_playerDeath) => "PlayerDeath"
  | CombatTextCreate(_combatTextCreate) => "CombatTextCreate"
  | Emoji(_emoji) => "Emoji"
  | TileEntityDisplayDollItemSync(_tileEntityDisplayDollItemSync) => "TileEntityDisplayDollItemSync"
  | TileEntityInteractionRequest(_tileEntityInteractionRequest) => "TileEntityInteractionRequest"
  | WeaponsRackTryPlacing(_weaponsRackTryPlacing) => "WeaponsRackTryPlacing"
  | TileEntityHatRackItemSync(_tileEntityHatRackItemSync) => "TileEntityHatRackItemSync"
  | TilePickingSync(_tilePickingSync) => "TilePickingSync"
  | RevengeMarkerSync(_revengeMarkerSync) => "RevengeMarkerSync"
  | RevengeMarkerRemove(_revengeMarkerRemove) => "RevengeMarkerRemove"
  | GolfBallLandInCup(_golfBallLandInCup) => "GolfBallLandInCup"
  | ClientFinishConnectingToServer(
      _clientFinishConnectingToServer,
    ) => "ClientFinishConnectingToServer"
  | NpcFishOut(_npcFishOut) => "NpcFishOut"
  | NpcTamper(_npcTamper) => "NpcTamper"
  | LegacySoundPlay(_legacySoundPlay) => "LegacySoundPlay"
  | FoodPlatterTryPlacing(_foodPlatterTryPlacing) => "FoodPlatterTryPlacing"
  | PlayerLuckFactorsUpdate(_playerLuckFactorsUpdate) => "PlayerLuckFactorsUpdate"
  | PlayerDead(_playerDead) => "PlayerDead"
  | CavernMonsterTypeSync(_cavernMonsterTypeSync) => "CavernMonsterTypeSync"
  | NpcBuffRemovalRequest(_npcBuffRemovalRequest) => "NpcBuffRemovalRequest"
  | ClientSyncedInventory(_clientSyncedInventory) => "ClientSyncedInventory"
  | CountsAsHostForGameplaySet(_countsAsHostForGameplaySet) => "CountsAsHostForGameplaySet"
  | CreditsOrSlimeTransform(_creditsOrSlimeTransform) => "CreditsOrSlimeTransform"
  | LucyAxeMessage(_lucyAxeMessage) => "LucyAxeMessage"
  | PiggyBankVoidLensUpdate(_piggyBankVoidLensUpdate) => "PiggyBankVoidLensUpdate"
  | DungeonDefendersEventAttemptSkipWait(
      _dungeonDefendersEventAttemptSkipWait,
    ) => "DungeonDefendersEventAttemptSkipWait"
  | HaveDryadDoStardewAnimation(_haveDryadDoStardewAnimation) => "HaveDryadDoStardewAnimation"
  | ItemDropShimmeredUpdate(_itemDropShimmeredUpdate) => "ItemDropShimmeredUpdate"
  | ShimmerEffectOrCoinLuck(_shimmerEffectOrCoinLuck) => "ShimmerEffectOrCoinLuck"
  | LoadoutSwitch(_loadoutSwitch) => "LoadoutSwitch"
  | ItemDropProtectedUpdate(_itemDropProtectedUpdate) => "ItemDropProtectedUpdate"
  }
}
